#textdomain wesnoth-Ageless_Era

#define AE_DEP_SPECIAL_NOTES_HUNTER
_"This unit is a hunter. Whenever it kills another unit, it deals more damage against units of the defeated unit's type."#enddef

#define AE_DEP_SPECIAL_NOTES_TRAMPLE
_"This unit is able to overrun an enemy. Whenever it attacks, it moves across the field of the defending unit."#enddef

#define AE_DEP_SPECIAL_NOTES_SPURT
_"This unit is able to move again after a nightly attack."#enddef

#define AE_DEP_SPECIAL_NOTES_LITHIC_IDOL
_"This unit turns to stone at day. It then regenerates +10 hitpoints per turn."#enddef

#define AE_DEP_WEAPON_SPECIAL_STARDUST
    [attacks]
        id=AE_dep_stardust
        name= _ "stardust"
        description= _ "When used in defense, this attacks reduces the attacker's number of strikes by 1."
        sub=1
        active_on=defense
        apply_to=attacker
    [/attacks]
#enddef
#define AE_DEP_SPECIAL_NOTES_STARDUST
_"When used in defense, this unit reduces the attacker's number of strikes by 1."#enddef

# wmllint: unbalanced-on
#define AE_DEP_WEAPON_SPECIAL_TRAMPLE
    [attacks]
        id=AE_dep_trample
        name= _ "trample"
        description= _ "This unit ignores the retaliation of the enemy and just overruns it."
        value=0
        apply_to=opponent
        special_note={AE_DEP_SPECIAL_NOTES_TRAMPLE}
    [/attacks]
[/specials]
[/attack]

[event]
    name=attack_end
    first_time_only=no
    id=AE_dep_trample_event

    [filter_attack]
        special=AE_dep_trample
    [/filter_attack]

    [store_locations]
        [not]
            [filter]
            [/filter]
        [/not]

        [filter_adjacent_location]
            x,y=$x2,$y2
            adjacent=-$unit.facing
        [/filter_adjacent_location]

        variable=trample_target_hex
    [/store_locations]

    [if]
        [variable]
            name=trample_target_hex.length
            greater_than=0
        [/variable]

        [then]
            [teleport]
                [filter]
                    x,y=$x1,$y1
                [/filter]
                animate=no

                x,y=$trample_target_hex.x,$trample_target_hex.y
                check_passability=yes
                clear_shroud=yes
            [/teleport]
            [AE_give_fight_xp]
                attacker=unit
                defender=second_unit
                attacker_xp=yes
                defender_xp=no
            [/AE_give_fight_xp]

            [capture_village]
                x,y=$trample_target_hex.x,$trample_target_hex.y
                side=$unit.side
            [/capture_village]
            [redraw]
            [/redraw]
        [/then]
    [/if]

    {CLEAR_VARIABLE trample_direction,trample_target_hex}
[/event]

[+attack]
    [+specials]
#enddef
# wmllint: unbalanced-off

#define AE_DEP_WEAPON_SPECIAL_HUNTER TYPE DISPLAYTYPE
    [damage]
        id=AE_dep_hunter
        name= _ "hunting "+{DISPLAYTYPE}
        description= _ "This unit deals +2 damage on offense against "+{DISPLAYTYPE}
        add=+2
        active_on=offense
        apply_to=attacker
        [filter_opponent]
            type={TYPE}
        [/filter_opponent]
    [/damage]
#enddef
